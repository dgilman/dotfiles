#!/usr/bin/env python3

import subprocess

resp = subprocess.run(["git", "status", "-s"], check=True, stdout=subprocess.PIPE, text=True)

output = resp.stdout.rsplit("\n")

stopme = False
for gitfile in output:
   if len(gitfile) != 0 and gitfile[0] == 'A' and "/" not in gitfile:
      stopme = True

if stopme:
   print("Hey!  You added a dotfile!  You probably want to update deploy.py.")
   print("If you know what you're doing git commit --no-verify.")
   import sys
   sys.exit(-1)
